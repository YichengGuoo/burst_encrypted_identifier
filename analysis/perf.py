import matplotlib.pyplot as plt
import numpy as np
from matplotlib.ticker import MultipleLocator
import matplotlib.pyplot as plt
from mpl_toolkits.axisartist import Axes

from numpy import mean
plt.rcParams["font.family"] = "Times New Roman"
plt.rcParams["font.size"] = 22
label_font = {'family': 'Times New Roman', 'weight': 'normal', 'size': 28}
legend_font = {'family': 'Times New Roman', 'weight': 'normal', 'size': 22}
# plt.style.use('bmh')




def perf_throughout():

    bps = [0, 0.0, 0.0, 2857020.0, 5376302.0, 5176158.0, 5090607.0, 4413460.0, 5147658.0, 2425230.0, 5286136.0, 4560290.0, 5628458.0, 2488508.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3967134.0, 5003668.0, 1270312.0, 4944964.0, 5207280.0, 5776670.0, 5049892.0, 4858236.0, 5895700.0, 4724728.0, 5720084.0, 909088.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 5172668.0, 3134728.0, 875262.0, 5093056.0, 5307224.0, 5315710.0, 5018704.0, 5784626.0, 4838482.0, 5713817.0, 3950512.0, 313890.0, 0.0, 0.0, 0.0, 0.0, 0.0, 2804804.0, 5933386.0, 3886892.0, 91090.0, 3836238.0, 5119948.0, 2266818.0, 613380.0, 1749620.0, 5167830.0, 4278548.0, 3612236.0, 0.0, 2464922.0, 5440060.0, 2470716.0, 1529532.0, 1213574.0, 5144922.0, 4902434.0, 3028380.0, 0.0, 3225416.0, 5483490.0, 2868102.0, 1585920.0, 850494.0, 4947992.0, 4804114.0, 2314702.0, 0.0, 3185480.0, 4722954.0, 3143584.0, 3466816.0, 0.0, 3816830.0, 5574756.0, 1902178.0, 442922.0, 2711312.0, 5210178.0, 3618832.0, 3838363.0, 0.0, 2655878.0, 5455238.0, 1964786.0, 1391766.0, 1199866.0, 5526638.0, 4815096.0, 3761998.0, 0.0, 1456972.0, 5461238.0, 2718992.0, 2292144.0, 74436.0, 5496262.0, 5410328.0, 3487086.0, 63478.0, 1674668.0, 5340586.0, 2889988.0, 2348582.0, 0.0, 5796584.0, 5159676.0, 3014790.0, 76706.0, 2338592.0, 5150732.0, 3056854.0, 3042628.0, 0.0, 4174866.0, 5433896.0, 2394686.0, 602768.0, 1914504.0, 5075328.0, 4134956.0, 3463536.0, 0.0, 2649094.0, 5473402.0, 2336916.0, 1480922.0, 1589496.0, 5098510.0, 4690450.0, 3801892.0, 0.0, 2142334.0, 5018366.0, 2473316.0, 2266114.0, 886734.0, 5512236.0, 4736742.0, 3518004.0, 0.0, 2872830.0, 5387800.0, 2576912.0, 1463194.0, 1170300.0, 5050480.0, 4623716.0, 2904892.0, 0.0, 3494846.0, 5299906.0, 3032402.0, 1665388.0, 960938.0, 5546100.0, 3895864.0, 2336454.0, 0.0, 4044864.0, 5360888.0, 3414050.0, 1642872.0, 486896.0, 5490388.0, 3996018.0, 2015758.0, 0.0, 4464476.0, 5399814.0, 3800592.0, 1446300.0, 0.0, 5781874.0, 3953134.0, 2101340.0, 0.0, 3336996.0, 5107972.0, 3125553.0, 2956470.0, 0.0, 4113558.0, 5397980.0, 2549800.0, 481706.0, 1682942.0, 5678374.0, 3555262.0, 2796402.0, 0.0, 4069880.0, 5451690.0, 2888558.0, 1058640.0, 593538.0, 5559684.0, 4410466.0, 3065774.0, 0.0, 2859044.0, 5487928.0, 2876782.0, 1842292.0, 262166.0, 5060150.0, 5039912.0, 3276034.0, 297274.0, 2579938.0, 5522346.0, 2767792.0, 1905720.0, 368212.0, 5138988.0, 5305460.0, 3412252.0, 52032.0, 2350436.0, 5467890.0, 2826396.0, 2120098.0, 151808.0, 5495136.0, 5085754.0, 3038748.0, 0.0, 2679830.0, 4978920.0, 2902204.0, 2686330.0, 0.0, 5676784.0, 4719706.0, 2303716.0, 0.0, 2664842.0, 5094660.0, 3277640.0, 3224562.0, 0.0, 3348964.0, 5358136.0, 2671150.0, 1357146.0, 1424580.0, 4643922.0, 4753832.0, 2653004.0, 0.0, 3107996.0, 4706812.0, 2898108.0, 3317160.0, 0.0, 4328164.0, 5588768.0, 2019448.0, 151250.0, 2835182.0, 5109080.0, 3574716.0, 3765996.0, 0.0, 2713516.0, 5633682.0, 2398700.0, 1163918.0, 1289084.0, 5505528.0, 4283708.0, 3641790.0, 0.0, 2631458.0, 5488398.0, 2542458.0, 1565364.0, 960294.0, 5623616.0, 4452754.0, 3184970.0, 0.0, 2425858.0, 5054188.0, 2809832.0, 2478334.0, 49744.0, 5955166.0, 4629882.0, 2571932.0, 0.0, 2694876.0, 5099412.0, 3065094.0, 3289434.0, 0.0, 3917230.0, 5285852.0, 2228310.0, 355056.0, 2593972.0, 5083942.0, 4131854.0, 3904614.0, 0.0, 2034592.0, 5426572.0, 2275044.0, 1917106.0, 976732.0, 5485760.0, 4932014.0, 3607507.0, 0.0, 2170296.0, 4909586.0, 2754130.0, 1945906.0, 0.0, 4772404.0, 5475850.0, 3335766.0, 1141714.0, 621176.0, 4947066.0, 4499028.0, 2642660.0, 0.0, 2746284.0, 5431592.0, 2759626.0, 2251114.0, 0.0, 4164408.0, 4930610.0, 3415868.0, 1896128.0, 699786.0, 5294802.0, 3945994.0, 1921194.0, 0.0, 5179496.0, 5087816.0, 3285864.0, 1710902.0, 97160.0, 4911026.0, 4625262.0, 1780478.0, 0.0, 3253238.0, 5149626.0, 3218394.0, 2371724.0, 0.0, 2142950.0, 4646878.0, 4314156.0, 3081184.0, 0.0, 3685302.0, 5056230.0, 2833514.0, 945452.0, 1911730.0, 5140028.0, 4158478.0, 3592664.0, 0.0, 2240654.0, 5317240.0, 2523986.0, 1983668.0, 295146.0, 5088550.0, 5097122.0, 3540834.0, 629762.0, 1796532.0, 5360560.0, 2642048.0, 2458430.0, 40408.0, 90746.0, 0.0, 0, 0.0, 0.0, 653968.0, 5128405.0, 5023526.0, 4545000.0, 5645147.0, 5016749.0, 4701674.0, 5567385.0, 4551402.0, 5573876.0, 4316981.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 178144.0, 3410710.0, 3032576.0, 4492768.0, 5336792.0, 5168622.0, 4962146.0, 5603808.0, 4697044.0, 5546766.0, 4462604.0, 2578790.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 4804108.0, 4938452.0, 1121588.0, 3392120.0, 5147768.0, 2448278.0, 2309884.0, 75318.0, 4969062.0, 5283728.0, 2768690.0, 223938.0, 1326314.0, 5027492.0, 4247352.0, 3063328.0, 0.0, 2632474.0, 5326254.0, 2788282.0, 1834398.0, 152404.0, 4984670.0, 5137960.0, 822232.0, 2258858.0, 0.0, 3756040.0, 5327558.0, 3144354.0, 1510978.0, 0.0, 1185828.0, 4178506.0, 4536230.0, 918674.0, 3253612.0, 4945047.0, 5119442.0, 121458.0, 1512412.0, 5613024.0, 4336987.0, 1966276.0, 0.0, 2711744.0, 4050224.0, 5337232.0, 1283034.0, 0.0, 2157088.0, 5150000.0, 3487290.0, 2623156.0, 0.0, 0.0, 0.0, 3588998.0, 2386112.0, 4542479.0, 3111590.0, 0.0, 0.0, 4768570.0, 2436478.0, 5899688.0, 251766.0, 0.0, 4088098.0, 5055264.0, 4231326.0, 0.0, 1154362.0, 4526818.0, 5727306.0, 1990038.0, 0.0, 2582264.0, 5442314.0, 5314122.0, 0.0, 0.0, 4139160.0, 5746588.0, 3504956.0, 0.0, 1109180.0, 4834786.0, 4667040.0, 2677616.0, 0.0, 1555180.0, 5669492.0, 5078016.0, 1180388.0, 0.0, 3767906.0, 5957032.0, 3687230.0, 0.0, 920060.0, 5828306.0, 4473388.0, 2164956.0, 0.0, 2191904.0, 5815890.0, 4998990.0, 392360.0, 0.0, 4052934.0, 5463014.0, 3902572.0, 0.0, 297348.0, 5816050.0, 4487146.0, 2798028.0, 0.0, 2984852.0, 4556548.0, 4965496.0, 896850.0, 0.0, 4646142.0, 4588734.0, 4193012.0, 0.0, 1069028.0, 4719254.0, 5091952.0, 2544474.0, 0.0, 2818174.0, 4675862.0, 5122522.0, 807094.0, 0.0, 4660676.0, 4519874.0, 4256814.0, 0.0, 996590.0, 4696360.0, 5068602.0, 2685819.0, 0.0, 2462966.0, 4570800.0, 5033612.0, 1319956.0, 0.0, 3551062.0, 4296144.0, 5441390.0, 171852.0, 0.0, 3753018.0, 5077895.0, 4557158.0, 0.0, 652870.0, 4606280.0, 5847632.0, 2295122.0, 0.0, 2610858.0, 5564948.0, 4225426.0, 1129492.0, 0.0, 3540712.0, 5754864.0, 4162636.0, 0.0, 899676.0, 5775250.0, 5757116.0, 1035562.0, 0.0, 3175856.0, 5285598.0, 5048016.0, 0.0, 0.0, 4350386.0, 5792236.0, 3227618.0, 0.0, 1335402.0, 5511738.0, 5808130.0, 751420.0, 0.0, 3231934.0, 5319864.0, 4647738.0, 139804.0, 0.0, 4010751.0, 5345584.0, 4078420.0, 0.0, 251424.0, 5787826.0, 4403856.0, 2967294.0, 0.0, 2010160.0, 5723996.0, 5026758.0, 634090.0, 0.0, 4292118.0, 5788598.0, 3328288.0, 0.0, 1110332.0, 5404486.0, 4183358.0, 2725660.0, 0.0, 2376070.0, 4539007.0, 4891834.0, 1737123.0, 0.0, 4132744.0, 4350846.0, 4907370.0, 0.0, 142274.0, 4246776.0, 4610116.0, 4467302.0, 0.0, 520958.0, 4486100.0, 5763612.0, 2624546.0, 0.0, 2323758.0, 4558792.0, 5665386.0, 899592.0, 0.0, 3259818.0, 5441918.0, 4762374.0, 0.0, 549672.0, 4562328.0, 5743706.0, 2632862.0, 0.0, 1857370.0, 5286842.0, 5723598.0, 607830.0, 0.0, 3406692.0, 5545608.0, 4448278.0, 0.0, 987772.0, 4549604.0, 5835494.0, 2127330.0, 0.0, 2559556.0, 5724742.0, 5128362.0, 0.0, 233650.0, 4558754.0, 5745874.0, 2957526.0, 0.0, 1662384.0, 5047502.0, 5709446.0, 904530.0, 0.0, 3100436.0, 5509494.0, 4879068.0, 0.0, 441204.0, 4591172.0, 5899418.0, 2554922.0, 0.0, 1943178.0, 5035314.0, 5814066.0, 555958.0, 0.0, 3368298.0, 5443804.0, 4572556.0, 0.0, 642110.0, 4665714.0, 5934316.0, 2281440.0, 0.0, 2856284.0, 5316504.0, 5232320.0, 0.0, 205120.0, 4256296.0, 5414608.0, 3616580.0, 0.0, 709750.0, 5949410.0, 5933676.0, 1022639.0, 0.0, 3725265.0, 5252713.0, 4673476.0, 0.0, 1076023.0, 4730480.0, 5229077.0, 2663718.0, 0.0, 2707661.0, 4573419.0, 5838273.0, 414691.0, 0.0, 3714118.0, 5040888.0, 4620914.0, 0.0, 731290.0, 4591952.0, 5655724.0, 2463674.0, 0.0, 2908784.0, 4531476.0, 5856600.0, 98804.0, 0.0, 3646553.0, 4986520.0, 4809412.0, 0.0, 425382.0, 4656218.0, 5887660.0, 2536650.0, 0.0, 1890156.0, 2530366.0, 0.0]
    bps = [x*8/1000/1000 for x in bps if x > 0][:500]
    pps = [0, 0.0, 1280.0, 3304.0, 3673.5, 3610.5, 3544.0, 2022.0, 0.0, 0.0, 0.0, 3086.0, 3046.5, 1583.5, 3637.0, 1213.0, 2358.0, 2642.0, 290.5, 3270.5, 1439.0, 1771.0, 3229.0, 259.0, 3554.5, 1186.5, 2161.5, 2838.5, 732.0, 3256.5, 1011.5, 2248.0, 2752.0, 713.5, 3498.0, 788.5, 2486.0, 2514.0, 812.0, 3770.0, 418.0, 2915.0, 2085.0, 1469.5, 3530.5, 0.0, 3105.5, 1894.5, 1395.5, 3604.5, 0.0, 3461.0, 1539.0, 1918.5, 3081.5, 0.0, 3349.5, 1650.5, 1667.0, 3333.0, 71.5, 3409.5, 1519.0, 1663.0, 3337.0, 182.0, 3309.5, 1508.5, 1848.5, 3151.5, 301.0, 3578.0, 1121.0, 2252.5, 2747.5, 238.0, 3742.5, 1019.5, 2244.5, 2755.5, 713.0, 3238.5, 1048.5, 2036.0, 2964.0, 289.0, 3507.0, 1204.0, 2110.5, 2889.5, 612.5, 3534.0, 853.5, 2542.0, 2458.0, 837.5, 3798.0, 364.5, 2917.0, 2083.0, 1389.5, 3206.5, 404.0, 2802.5, 2197.5, 1109.5, 3690.0, 200.5, 3066.5, 1933.5, 1395.5, 3604.5, 0.0, 3311.5, 1688.5, 1600.5, 3399.5, 16.5, 3222.0, 1761.5, 1562.0, 3438.0, 0.0, 3429.5, 1570.5, 1870.5, 3129.5, 104.5, 3308.0, 1587.5, 1718.5, 3281.5, 77.5, 3558.5, 1364.0, 2009.0, 2991.0, 552.0, 3274.5, 1173.5, 2219.5, 2780.5, 642.5, 3553.0, 804.5, 2434.0, 2566.0, 909.5, 3579.5, 511.0, 2559.5, 2440.5, 980.0, 3713.0, 307.0, 2956.5, 2043.5, 1210.0, 3680.0, 110.0, 2871.5, 2128.5, 1376.5, 3535.0, 88.5, 2869.0, 2131.0, 1430.0, 3570.0, 0.0, 3146.0, 1854.0, 1568.0, 3432.0, 164.5, 3274.0, 1561.5, 1825.0, 3175.0, 332.0, 3537.0, 1131.0, 2122.5, 2877.5, 587.5, 3273.5, 1139.0, 2248.5, 2751.5, 744.0, 3524.0, 732.0, 2606.5, 2393.5, 996.5, 3784.0, 219.5, 3103.5, 1896.5, 1636.0, 3364.0, 62.0, 3407.0, 1531.0, 1760.5, 3239.5, 222.5, 3597.0, 1180.5, 2243.5, 2756.5, 452.0, 3773.5, 774.5, 2613.0, 2387.0, 1140.0, 3215.5, 644.5, 2610.5, 2389.5, 692.5, 3816.5, 491.0, 2902.0, 2098.0, 1458.0, 3303.0, 239.0, 3160.0, 1840.0, 1585.0, 3415.0, 131.5, 3298.0, 1570.5, 1778.5, 3221.5, 281.0, 3514.0, 1205.0, 2211.0, 2789.0, 508.0, 3784.0, 708.0, 2698.5, 2301.5, 1239.5, 3294.0, 466.5, 2894.0, 2106.0, 1336.5, 3663.5, 0.0, 3524.0, 1476.0, 2040.5, 2959.5, 400.5, 3316.5, 1283.0, 2087.0, 2913.0, 621.0, 3558.0, 821.0, 2498.5, 2501.5, 791.5, 3719.0, 489.5, 2785.5, 2214.5, 1232.5, 3245.0, 522.5, 2772.5, 2227.5, 1125.5, 3779.0, 95.5, 2887.5, 2112.5, 1137.5, 3735.5, 127.0, 3180.5, 1819.5, 1645.0, 3355.0, 0.0, 3401.5, 1598.5, 1695.0, 3305.0, 160.5, 3565.5, 1274.0, 2066.0, 2934.0, 538.0, 3249.0, 1213.0, 2110.0, 2890.0, 573.5, 3525.0, 901.5, 2437.5, 2562.5, 666.0, 3282.5, 1051.5, 2224.5, 2775.5, 347.0, 3497.5, 1155.5, 1874.0, 3126.0, 0.0, 3311.0, 1689.0, 1494.0, 3506.0, 0.0, 968.0, 3352.5, 679.5, 1510.0, 3490.0, 0.0, 2813.0, 2187.0, 712.5, 3106.0, 1181.5, 812.5, 3532.0, 655.5, 2762.0, 2238.0, 255.5, 3557.5, 1187.0, 120.5, 3132.5, 1747.0, 1495.0, 3505.0, 0.0, 2301.0, 2699.0, 43.5, 3279.0, 1677.5, 1516.0, 3484.0, 0.0, 3369.5, 1630.5, 1627.0, 3373.0, 0.0, 1552.5, 3447.5, 0.0, 3016.5, 1983.5, 1343.0, 3152.0, 505.0, 2847.5, 2152.5, 901.5, 3707.5, 391.0, 2851.5, 2148.5, 1105.0, 3503.0, 392.0, 2820.0, 2180.0, 1050.0, 3720.0, 230.0, 2897.5, 2102.5, 1300.5, 3500.5, 199.0, 2797.5, 2202.5, 1030.0, 3700.5, 269.5, 2936.0, 2064.0, 1329.0, 3504.5, 166.5, 2780.5, 2219.5, 1139.5, 3744.0, 116.5, 3201.5, 1798.5, 1645.0, 3355.0, 0.0, 3187.0, 1813.0, 1552.0, 3448.0, 92.0, 3343.0, 1565.0, 1625.5, 3374.5, 82.5, 3457.5, 1460.0, 1715.0, 3285.0, 100.5, 3530.0, 1369.5, 2050.0, 2950.0, 230.0, 3268.5, 1501.5, 1785.0, 3215.0, 291.0, 3566.0, 1143.0, 2311.5, 2688.5, 418.0, 3777.5, 804.5, 2479.5, 2520.5, 983.5, 3204.5, 812.0, 2432.5, 2567.5, 730.5, 3802.5, 467.0, 2899.0, 2101.0, 1291.5, 3708.5, 0.0, 3361.5, 1638.5, 1796.0, 3204.0, 0.0, 3412.5, 1587.5, 1603.0, 3397.0, 75.5, 3489.0, 1435.5, 1776.5, 3223.5, 121.0, 3269.0, 1610.0, 1581.5, 3418.5, 0.0, 3403.0, 1597.0, 1577.0, 3423.0, 0.0, 3367.5, 1632.5, 1559.5, 3440.5, 0.0, 3502.0, 1498.0, 1789.5, 3210.5, 305.5, 3320.5, 1374.0, 1942.0, 3058.0, 206.0, 3407.5, 1386.5, 1828.0, 3172.0, 283.0, 3287.0, 1430.0, 1892.5, 3107.5, 366.0, 3525.0, 1109.0, 2222.0, 2778.0, 361.5, 3241.0, 1397.5, 1790.5, 3209.5, 184.5, 3521.0, 1294.5, 1987.5, 3012.5, 476.5, 3252.0, 1271.5, 2027.5, 2972.5, 467.0, 3511.0, 1022.0, 2291.5, 2708.5, 612.5, 3240.5, 1147.0, 2141.0, 2859.0, 321.0, 3528.5, 1150.5, 1769.5, 3230.5, 174.5, 3257.0, 1568.5, 1421.0, 3579.0, 0.0, 3220.0, 1780.0, 1300.0, 3700.0, 0.0, 2926.5, 2073.5, 1034.0, 3695.0, 271.0, 2744.0, 2256.0, 993.0, 3488.5, 518.5, 2414.0, 2586.0, 903.5, 3461.5, 635.0, 2684.0, 2316.0, 956.0, 3800.0, 244.0, 3129.5, 1870.5, 1618.5, 3240.0, 141.5, 3186.0, 1814.0, 1538.0, 3462.0, 0.0, 3398.5, 1601.5, 1649.0, 3351.0, 61.0, 3243.5, 1695.5, 1532.5, 3467.5, 0.0, 3537.5, 1462.5, 2006.5, 2993.5, 58.0, 3755.0, 1187.0, 1887.0, 3113.0, 226.0, 3249.5, 1524.5, 1690.5, 3309.5, 78.5, 3440.0, 1481.5, 2003.0, 2997.0, 167.5, 3548.0, 1284.5, 2149.0, 2851.0, 114.5, 3803.5, 1082.0, 2247.0, 2753.0, 365.5, 3263.0, 1371.5, 1602.0, 3398.0, 28.0, 3562.0, 1410.0, 1857.0, 3143.0, 381.0, 3306.5, 1312.5, 2019.0, 2981.0, 165.5, 3575.0, 1259.5, 2157.0, 2843.0, 314.0, 3266.5, 1419.5, 1850.0, 3150.0, 272.0, 3564.5, 1163.5, 2086.5, 2913.5, 556.0, 3252.0, 1192.0, 2160.0, 2840.0, 587.0, 3520.5, 892.5, 2457.0, 2543.0, 834.5, 3734.5, 431.0, 2870.5, 2129.5, 1262.5, 3520.5, 217.0, 2706.5, 2293.5, 979.5, 3690.5, 330.0, 2783.0, 2217.0, 1160.5, 3247.5, 592.0, 2858.5, 2141.5, 1041.5, 3700.5, 258.0, 3031.5, 1968.5, 1416.0, 3484.5, 99.5, 3097.5, 1902.5, 1286.5, 3713.0, 0.5, 3175.0, 1825.0, 1523.5, 3476.5, 0.0, 3274.0, 1726.0, 1668.0, 3332.0, 0.0, 3209.0, 1791.0, 1432.5, 3567.5, 0.0, 3170.0, 1830.0, 1316.5, 3683.5, 0.0, 3324.0, 1676.0, 1494.5, 3505.5, 0.0, 3267.5, 1732.5, 1599.5, 3400.5, 15.5, 3569.5, 1415.0, 1789.5, 3190.5, 20.0, 3208.0, 1792.0, 1437.5, 3562.5, 0.0, 3433.0, 1567.0, 1693.5, 3306.5, 156.5, 3299.0, 1544.5, 1786.0, 3214.0, 255.0, 3549.5, 1195.5, 2213.0, 2787.0, 227.0, 3758.0, 1015.0, 2226.5, 2773.5, 434.5, 3214.5, 1351.0, 1727.5, 3272.5, 70.0, 3468.5, 1461.5, 1773.5, 3226.5, 136.0, 3520.5, 1343.5, 2034.5, 2965.5, 234.0, 3288.5, 1477.5, 1606.5, 3393.5, 29.0, 3519.5, 1451.5, 1898.5, 3101.5, 71.0, 3251.5, 1677.5, 1492.5, 3507.5, 0.0, 3129.5, 1870.5, 697.0, 2816.0, 1487.0, 1829.5, 3170.5, 276.5, 3258.0, 1465.5, 1705.0, 3295.0, 154.5, 3502.0, 1343.5, 1969.0, 3031.0, 148.5, 3264.0, 1587.5, 1630.0, 3370.0, 55.0, 3520.0, 1425.0, 1796.5, 3203.5, 51.5, 3338.5, 1610.0, 1581.5, 3418.5, 0.0, 3449.5, 1550.5, 1392.5, 3607.5, 0.0, 3352.0, 1648.0, 1559.5, 3440.5, 95.0, 3599.5, 1305.5, 2010.0, 2990.0, 513.0, 3308.0, 1179.0, 2112.0, 2888.0, 318.0, 3511.0, 1171.0, 2104.5, 2895.5, 612.0, 3275.5, 1112.5, 2003.5, 2996.5, 333.5, 3485.5, 1181.0, 2004.5, 2995.5, 387.0, 3222.0, 1391.0, 1870.0, 3130.0, 204.0, 3505.0, 1291.0, 2061.5, 2938.5, 228.0, 3223.0, 1549.0, 1616.5, 3383.5, 6.0, 3482.0, 1512.0, 1664.5, 3335.5, 53.5, 3291.5, 1655.0, 1561.0, 3439.0, 0.0, 3365.0, 1635.0, 1417.0, 3583.0, 0.0, 3305.5, 1694.5, 1494.5, 3505.5, 0.0, 3363.0, 1637.0, 1601.0, 3399.0, 0.0, 3131.0, 1869.0, 1258.0, 3684.5, 57.5, 3118.0, 1882.0, 1458.5, 3476.0, 65.5, 3130.0, 1870.0, 1543.5, 3456.5, 0.0, 2833.5, 2166.5, 1069.5, 3710.0, 220.5, 3013.5, 1986.5, 1385.0, 3615.0, 0.0, 3058.0, 1942.0, 1244.0, 3685.0, 71.0, 2887.5, 2112.5, 1035.5, 3688.0, 276.5, 2833.5, 2166.5, 1235.5, 3467.5, 297.0, 2941.5, 2058.5, 1341.0, 3201.0, 458.0, 2695.0, 2305.0, 954.5, 3825.5, 220.0, 3082.0, 1918.0, 1463.0, 3222.5, 314.5, 2789.0, 2211.0, 926.5, 3752.5, 321.0, 2984.0, 2016.0, 1504.0, 3273.5, 222.5, 3068.5, 1931.5, 1215.5, 3723.0, 61.5, 3099.5, 1900.5, 1374.0, 3626.0, 0.0, 3421.5, 1578.5, 1693.0, 3307.0, 156.5, 3304.0, 1539.5, 1801.0, 3199.0, 219.5, 3570.5, 1210.0, 2213.5, 2786.5, 521.5, 3258.0, 1220.5, 1892.5, 3107.5, 377.0, 3542.0, 1081.0, 2044.5, 2955.5, 308.0, 3244.5, 1447.5, 1739.0, 3261.0, 166.0, 3504.0, 1330.0, 1780.5, 3219.5, 133.5, 3245.0, 1621.5, 1465.5, 3534.5, 0.0, 3280.5, 1719.5, 1482.5, 3517.5, 0.0, 3087.5, 1912.5, 1285.0, 3661.5, 53.5, 3113.0, 1887.0, 1380.5, 3445.0, 174.5, 3007.5, 1992.5, 1468.5, 3226.0, 305.5, 2889.0, 2111.0, 890.0, 3751.0, 359.0, 2895.0, 2105.0, 1311.5, 3183.5, 505.0, 2531.0, 2469.0, 483.0, 3699.5, 817.5, 2418.5, 2581.5, 594.5, 3456.0, 949.5, 2411.5, 2588.5, 407.0, 3699.5, 893.5, 2397.0, 2603.0, 484.0, 3531.0, 985.0, 2334.5, 2665.5, 444.0, 3703.0, 853.0, 2383.5, 2616.5, 865.5, 3256.0, 878.5, 2306.0, 2694.0, 627.0, 3489.0, 884.0, 2338.0, 2662.0, 677.0, 3506.5, 816.5, 2512.5, 2487.5, 452.0, 2947.0, 1601.0, 785.0, 3101.0, 1114.0, 2107.5, 2892.5, 490.0, 3477.0, 1033.0, 2265.0, 2735.0, 774.0, 3273.0, 953.0, 2381.0, 2619.0, 656.5, 3540.0, 803.5, 2573.5, 2426.5, 767.5, 3186.5, 1046.0, 2222.5, 2777.5, 311.5, 3540.0, 1148.5, 2164.0, 2836.0, 396.0, 3314.5, 1289.5, 1810.5, 3189.5, 225.5, 3515.0, 1259.5, 2159.5, 2840.5, 366.5, 3254.0, 1379.5, 1752.0, 3248.0, 174.0, 3505.0, 1321.0, 1905.0, 3095.0, 381.0, 3254.0, 1365.0, 1894.0, 3106.0, 344.0, 3567.0, 1089.0, 2088.0, 2912.0, 507.0, 3152.0, 1341.0, 1705.5, 3294.5, 127.5, 3508.5, 1364.0, 1912.0, 3088.0, 232.0, 3260.5, 1507.5]
    pps = [x for x in pps if x > 0][:500]
    print(min(bps))
    fig = plt.figure(figsize=(15, 10))
    ax = fig.add_subplot()
    # ax.set_ylim(0, 70)
    ax.set_ylabel("Throughout(Packets/s)", fontdict=label_font)
    ax.set_xlabel("Time(second)", fontdict=label_font)
    ax.plot(pps, lw=1.5, color='b')
    ax.axhline(mean(pps), ls='-', color='r')
    plt.savefig("./figures/perf_throughout_pps.eps", bbox_inches='tight')
    plt.show()


def perf_system_cls_metrics():
    packets = list(range(0, 130000, 1000))

    sip_acc1 = [1.0, 1.0, 0.7777777777777778, 0.7777777777777778, 0.8181818181818182, 0.8125, 0.7777777777777778, 0.7391304347826086, 0.76, 0.75, 0.7419354838709677, 0.7352941176470589, 0.75, 0.7631578947368421, 0.7560975609756098, 0.7560975609756098, 0.7555555555555555, 0.75, 0.76, 0.7547169811320755, 0.7636363636363637, 0.7419354838709677, 0.75, 0.746268656716418, 0.7352941176470589, 0.7333333333333333, 0.7402597402597403, 0.7468354430379747, 0.7530864197530864, 0.7590361445783133, 0.7586206896551724, 0.7640449438202247, 0.7692307692307693, 0.7741935483870968, 0.7789473684210526, 0.7708333333333334, 0.7755102040816326, 0.7722772277227723, 0.7722772277227723, 0.7766990291262136, 0.7706422018348624, 0.7747747747747747, 0.7747747747747747, 0.7787610619469026, 0.7758620689655172, 0.7815126050420168, 0.7851239669421488, 0.7886178861788617, 0.792, 0.7890625, 0.7890625, 0.7923076923076923, 0.7894736842105263, 0.7925925925925926, 0.7841726618705036, 0.7872340425531915, 0.7902097902097902, 0.7902097902097902, 0.7931034482758621, 0.7933333333333333, 0.7973856209150327, 0.7973856209150327, 0.8, 0.802547770700637, 0.8, 0.8, 0.8024691358024691, 0.8, 0.8023952095808383, 0.7953216374269005, 0.7976878612716763, 0.8, 0.8022598870056498, 0.8044692737430168, 0.8021978021978022, 0.8043478260869565, 0.8064516129032258, 0.8085106382978723, 0.8105263157894737, 0.8072916666666666, 0.8092783505154639, 0.8071065989847716, 0.8071065989847716, 0.8090452261306532, 0.8029556650246306, 0.8048780487804879, 0.8048780487804879, 0.8067632850241546, 0.8047619047619048, 0.8047619047619048, 0.8055555555555556, 0.8073394495412844, 0.8090909090909091, 0.8108108108108109, 0.8034934497816594, 0.8017241379310345, 0.8, 0.8016877637130801, 0.8, 0.8016528925619835, 0.8, 0.8016194331983806, 0.8032128514056225, 0.8047808764940239, 0.7976653696498055, 0.7992277992277992, 0.8007662835249042, 0.8022813688212928, 0.7962962962962963, 0.7948717948717948, 0.7934782608695652, 0.7942238267148014, 0.7949640287769785, 0.7935943060498221, 0.7937062937062938, 0.7937062937062938, 0.7951388888888888, 0.7965517241379311, 0.7932203389830509, 0.7919463087248322, 0.7933333333333333, 0.7947019867549668, 0.7960526315789473, 0.7909967845659164, 0.7884615384615384, 0.7884615384615384, 0.7884615384615384, 0.7894736842105263, 0.7894736842105263, 0.7907692307692308, 0.7920489296636085]
    sip_acc2 = [0.5714285714285714, 0.5555555555555556, 0.5833333333333334, 0.5833333333333334, 0.6428571428571429, 0.6111111111111112, 0.65, 0.65, 0.6818181818181818, 0.7083333333333334, 0.6875, 0.6875, 0.7058823529411765, 0.7222222222222222, 0.7368421052631579, 0.6956521739130435, 0.7083333333333334, 0.7058823529411765, 0.7169811320754716, 0.7272727272727273, 0.7017543859649122, 0.711864406779661, 0.7213114754098361, 0.7301587301587301, 0.7272727272727273, 0.7101449275362319, 0.7101449275362319, 0.7183098591549296, 0.726027397260274, 0.7108433734939759, 0.7209302325581395, 0.7191011235955056, 0.7191011235955056, 0.7252747252747253, 0.7216494845360825, 0.7216494845360825, 0.7272727272727273, 0.7326732673267327, 0.7378640776699029, 0.7247706422018348, 0.7247706422018348, 0.7297297297297297, 0.7345132743362832, 0.7391304347826086, 0.7258064516129032, 0.7301587301587301, 0.7286821705426356, 0.732824427480916, 0.7368421052631579, 0.7299270072992701, 0.7338129496402878, 0.7338129496402878, 0.7375886524822695, 0.7412587412587412, 0.7315436241610739, 0.7315436241610739, 0.7350993377483444, 0.738562091503268, 0.7419354838709677, 0.7317073170731707, 0.7349397590361446, 0.7337278106508875, 0.7368421052631579, 0.7314285714285714, 0.7344632768361582, 0.7374301675977654, 0.7403314917127072, 0.7486631016042781, 0.7473684210526316, 0.7409326424870466, 0.7435897435897436, 0.7461928934010152, 0.7487437185929648, 0.7403846153846154, 0.7428571428571429, 0.7417840375586855, 0.7417840375586855, 0.7441860465116279, 0.7420814479638009, 0.7443946188340808, 0.7443946188340808, 0.7466666666666667, 0.748898678414097, 0.7424892703862661, 0.7424892703862661, 0.7446808510638298, 0.7468354430379747, 0.7489539748953975, 0.7419354838709677, 0.744, 0.7430830039525692, 0.7450980392156863, 0.7470817120622568, 0.7432950191570882, 0.7452471482889734, 0.7471698113207547, 0.7490636704119851, 0.7509293680297398, 0.7435897435897436, 0.7435897435897436, 0.7454545454545455, 0.7472924187725631, 0.7464285714285714, 0.7448275862068966, 0.7440273037542662, 0.7440273037542662, 0.7457627118644068, 0.7441860465116279, 0.7458745874587459, 0.7458745874587459, 0.7475409836065574, 0.749185667752443, 0.744408945686901, 0.744408945686901, 0.746031746031746, 0.7476340694006309, 0.7492163009404389, 0.7439024390243902, 0.7454545454545455, 0.7447447447447447, 0.746268656716418, 0.7477744807121661, 0.7448680351906158, 0.7463556851311953, 0.7478260869565218, 0.7492795389048992, 0.7492795389048992, 0.7450424929178471, 0.7450424929178471, 0.7464788732394366, 0.7478991596638656, 0.7493036211699164, 0.7452574525745257, 0.7446236559139785, 0.7446236559139785, 0.7459893048128342, 0.7433862433862434, 0.7447368421052631, 0.7460732984293194, 0.7473958333333334, 0.7487046632124352, 0.7448979591836735, 0.7448979591836735, 0.7461928934010152, 0.7474747474747475, 0.7487437185929648, 0.7444717444717445, 0.7450980392156863, 0.7445255474452555, 0.7457627118644068, 0.7469879518072289, 0.7446300715990454, 0.7458432304038005, 0.7458432304038005, 0.7470449172576832, 0.7482352941176471, 0.7447795823665894, 0.7447795823665894, 0.745958429561201, 0.7471264367816092, 0.7482837528604119, 0.7449664429530202, 0.7449664429530202, 0.7444444444444445, 0.745575221238938, 0.7450549450549451, 0.7445414847161572, 0.7456521739130435, 0.7467532467532467, 0.7478448275862069, 0.7489270386266095, 0.7446808510638298, 0.7457627118644068, 0.7457627118644068, 0.7468354430379747, 0.7463312368972747, 0.7453798767967146, 0.7448979591836735, 0.7448979591836735, 0.7459349593495935, 0.7449799196787149, 0.746, 0.746, 0.7470119521912351, 0.748015873015873, 0.7450980392156863, 0.7450980392156863, 0.74609375, 0.7470817120622568, 0.748062015503876, 0.7442748091603053, 0.7433460076045627, 0.7429111531190926, 0.743879472693032, 0.7448405253283302, 0.7430167597765364, 0.7439703153988868, 0.7439703153988868, 0.744916820702403, 0.7458563535911602, 0.7431693989071039, 0.7431693989071039, 0.7441016333938294, 0.7450271247739603, 0.745945945945946, 0.7424511545293073, 0.7433628318584071, 0.7429577464788732, 0.743859649122807, 0.743455497382199, 0.7430555555555556, 0.7439446366782007, 0.7448275862068966, 0.7457044673539519, 0.7465753424657534, 0.7431972789115646, 0.7440677966101695, 0.7449324324324325, 0.7457912457912458, 0.7437185929648241, 0.7417218543046358, 0.7413509060955519, 0.7413509060955519, 0.7422003284072249, 0.7414634146341463, 0.7423014586709886, 0.7423014586709886, 0.7431340872374798, 0.7439613526570048, 0.7424483306836248, 0.7424483306836248, 0.7432646592709984, 0.7440758293838863, 0.7448818897637796, 0.7422360248447205, 0.7422360248447205, 0.7418856259659969, 0.7426810477657936, 0.7423312883435583, 0.7419847328244275, 0.7427701674277016, 0.7435508345978755, 0.7443267776096822, 0.7450980392156863, 0.7428998505231689, 0.7436661698956781, 0.7444279346210996, 0.7444279346210996, 0.7451851851851852, 0.743065693430657, 0.7427325581395349, 0.7427325581395349, 0.7434782608695653, 0.7420749279538905, 0.7435530085959885, 0.7435530085959885]
    sip_acc3 = [0.0, 1.0, 1.0, 1.0, 0.7692307692307693, 0.75, 0.7368421052631579, 0.7619047619047619, 0.75, 0.7692307692307693, 0.7586206896551724, 0.7741935483870968, 0.7878787878787878, 0.8, 0.7560975609756098, 0.7674418604651163, 0.7777777777777778, 0.7777777777777778, 0.7872340425531915, 0.7543859649122807, 0.75, 0.75, 0.7580645161290323, 0.7538461538461538, 0.7571428571428571, 0.7571428571428571, 0.7638888888888888, 0.7702702702702703, 0.7692307692307693, 0.7560975609756098, 0.7619047619047619, 0.7674418604651163, 0.7727272727272727, 0.7578947368421053, 0.7551020408163265, 0.7524752475247525, 0.7572815533980582, 0.7619047619047619, 0.7592592592592593, 0.7567567567567568, 0.7610619469026548, 0.7610619469026548, 0.7652173913043478, 0.7583333333333333, 0.7560975609756098, 0.76, 0.7637795275590551, 0.7674418604651163, 0.7573529411764706, 0.7571428571428571, 0.7535211267605634, 0.7569444444444444, 0.7551020408163265, 0.7583892617449665, 0.756578947368421, 0.7597402597402597, 0.7628205128205128, 0.7716049382716049, 0.7619047619047619, 0.7647058823529411, 0.7674418604651163, 0.7701149425287356, 0.7670454545454546, 0.7608695652173914, 0.7593582887700535, 0.7593582887700535, 0.7619047619047619, 0.7604166666666666, 0.7614213197969543, 0.7614213197969543, 0.7638190954773869, 0.7661691542288557, 0.7658536585365854, 0.7607655502392344, 0.7630331753554502, 0.7652582159624414, 0.7674418604651163, 0.7612612612612613, 0.76, 0.7587719298245614, 0.7608695652173914, 0.7629310344827587, 0.7617021276595745, 0.7605042016806722, 0.7625, 0.7644628099173554, 0.7663934426229508, 0.7611336032388664, 0.76, 0.7619047619047619, 0.7637795275590551, 0.765625, 0.7604562737642585, 0.758364312267658, 0.758364312267658, 0.7601476014760148, 0.7591240875912408, 0.7608695652173914, 0.7598566308243727, 0.7615658362989324, 0.7632508833922261, 0.7649122807017544, 0.7594501718213058, 0.7610921501706485, 0.7627118644067796, 0.7643097643097643, 0.7598684210526315, 0.758957654723127, 0.7580645161290323, 0.7580645161290323, 0.7596153846153846, 0.7587301587301587, 0.759375, 0.759375, 0.7608695652173914, 0.7623456790123457, 0.7598784194528876, 0.7590361445783133, 0.7604790419161677, 0.7619047619047619, 0.7633136094674556, 0.7594202898550725, 0.7586206896551724, 0.7578347578347578, 0.7592067988668555, 0.7605633802816901, 0.7597765363128491, 0.7590027700831025, 0.7603305785123967, 0.7616438356164383, 0.7629427792915532, 0.7594594594594595, 0.7587131367292225, 0.76, 0.7612732095490716, 0.762532981530343, 0.7590673575129534, 0.7576530612244898, 0.7576530612244898, 0.7588832487309645, 0.7581863979848866, 0.7593984962406015, 0.7587064676616916, 0.7599009900990099, 0.7610837438423645, 0.7622549019607843, 0.7602905569007264, 0.7596153846153846, 0.7607655502392344, 0.7619047619047619, 0.7582159624413145, 0.7570093457943925, 0.7575057736720554, 0.7575057736720554, 0.7586206896551724, 0.7579908675799086, 0.7584650112866818, 0.7584650112866818, 0.7595505617977528, 0.7606263982102909, 0.7588495575221239, 0.7582417582417582, 0.7592997811816192, 0.7603485838779956, 0.7613882863340564, 0.7585470085470085, 0.7579617834394905, 0.7573839662447257, 0.7584033613445378, 0.7594142259414226, 0.7588357588357588, 0.7582644628099173, 0.7592592592592593, 0.7602459016393442, 0.7612244897959184, 0.7586206896551724, 0.7580645161290323, 0.7590361445783133, 0.76, 0.7609561752988048, 0.7583497053045186, 0.7572815533980582, 0.7572815533980582, 0.758220502901354, 0.7576923076923077, 0.7586206896551724, 0.758095238095238, 0.7590132827324478, 0.7599243856332704, 0.7608286252354048, 0.7593283582089553, 0.758364312267658, 0.7592592592592593, 0.7601476014760148, 0.7577413479052824, 0.7572463768115942, 0.7563176895306859, 0.7563176895306859, 0.7571942446043165, 0.7567084078711985, 0.7570921985815603, 0.7570921985815603, 0.7579505300353356, 0.7588028169014085, 0.7574171029668412, 0.7569444444444444, 0.7577854671280276, 0.7586206896551724, 0.7594501718213058, 0.7572156196943973, 0.7567567567567568, 0.7567567567567568, 0.7575757575757576, 0.7583892617449665, 0.7579298831385642, 0.7574750830564784, 0.7582781456953642, 0.759075907590759, 0.7598684210526315, 0.7585644371941273, 0.757328990228013, 0.757328990228013, 0.7581168831168831, 0.7588996763754046, 0.7568, 0.7563694267515924, 0.7563291139240507, 0.7570977917981072, 0.7566718995290423, 0.7574334898278561, 0.7574334898278561, 0.7570093457943925]
    sip_acc4 = [1.0, 1.0, 1.0, 1.0, 0.8181818181818182, 0.7857142857142857, 0.8125, 0.8333333333333334, 0.85, 0.7777777777777778, 0.7666666666666667, 0.7575757575757576, 0.7714285714285715, 0.7837837837837838, 0.7560975609756098, 0.7560975609756098, 0.7674418604651163, 0.7777777777777778, 0.7872340425531915, 0.7547169811320755, 0.7547169811320755, 0.7636363636363637, 0.7719298245614035, 0.7796610169491526, 0.7536231884057971, 0.75, 0.75, 0.7567567567567568, 0.7532467532467533, 0.75, 0.75, 0.7560975609756098, 0.7619047619047619, 0.7674418604651163, 0.75, 0.7553191489361702, 0.7604166666666666, 0.7653061224489796, 0.7523809523809524, 0.75, 0.7477477477477478, 0.7477477477477478, 0.7522123893805309, 0.75, 0.7478991596638656, 0.7478991596638656, 0.7520661157024794, 0.7560975609756098, 0.75, 0.7480916030534351, 0.7518796992481203, 0.7555555555555555, 0.7591240875912408, 0.75, 0.7482993197278912, 0.7466666666666667, 0.75, 0.7532467532467533, 0.7515923566878981, 0.7468354430379747, 0.75, 0.7530864197530864, 0.7530864197530864, 0.7485029940119761, 0.7470588235294118, 0.75, 0.7528735632183908, 0.7556818181818182, 0.7445652173913043, 0.746031746031746, 0.746031746031746, 0.7486910994764397, 0.7474226804123711, 0.7461928934010152, 0.7487437185929648, 0.7512437810945274, 0.7536945812807881, 0.7560975609756098, 0.7488151658767772, 0.7511737089201878, 0.7534883720930232, 0.7557603686635944, 0.75, 0.748898678414097, 0.7478260869565218, 0.75, 0.75, 0.7489361702127659, 0.75, 0.75, 0.7520661157024794, 0.7540983606557377, 0.751004016064257, 0.75, 0.7519685039370079, 0.75390625, 0.7558139534883721, 0.7509433962264151, 0.75, 0.7490774907749077, 0.7509157509157509, 0.7527272727272727, 0.7517985611510791, 0.7508896797153025, 0.7526501766784452, 0.7543859649122807, 0.7560975609756098, 0.7517241379310344, 0.7508532423208191, 0.752542372881356, 0.7542087542087542, 0.7558528428093646, 0.749185667752443, 0.75, 0.75, 0.7515923566878981, 0.750788643533123, 0.75, 0.7515527950310559, 0.7530864197530864, 0.754601226993865, 0.7560975609756098, 0.7514970059880239, 0.7529761904761905, 0.7544378698224852, 0.7558823529411764, 0.7514450867052023, 0.7514285714285714, 0.7507082152974505, 0.7507082152974505, 0.752112676056338, 0.7513966480446927, 0.7520661157024794, 0.7520661157024794, 0.7534246575342466, 0.7547683923705722, 0.7547169811320755, 0.752, 0.753315649867374, 0.7546174142480211, 0.7559055118110236, 0.7525773195876289, 0.7519181585677749, 0.751269035532995, 0.7525252525252525, 0.7537688442211056, 0.7531172069825436, 0.7524752475247525, 0.7536945812807881, 0.7536945812807881, 0.7549019607843137, 0.7530266343825666, 0.7524038461538461, 0.7535885167464115, 0.7547619047619047, 0.7559241706161137, 0.752913752913753, 0.7523148148148148, 0.7517241379310344, 0.7528604118993135, 0.7522727272727273, 0.753393665158371, 0.7528089887640449, 0.7539149888143176, 0.755011135857461, 0.7582417582417582, 0.7565217391304347, 0.755939524838013, 0.7569892473118279, 0.7569892473118279, 0.7580299785867237, 0.7536842105263157, 0.7541666666666667, 0.7541666666666667, 0.7551867219917012, 0.7546391752577319, 0.7540983606557377, 0.7551020408163265, 0.7560975609756098, 0.757085020242915, 0.7570281124497992, 0.7549800796812749, 0.7559523809523809, 0.7569169960474308, 0.7578740157480315, 0.7553398058252427, 0.7548262548262549, 0.7543186180422264, 0.7552581261950286, 0.7561904761904762, 0.7556818181818182, 0.7551789077212806, 0.7551789077212806, 0.7560975609756098, 0.7570093457943925, 0.7555555555555555, 0.7550644567219152, 0.7559633027522936, 0.7568555758683729, 0.7577413479052824, 0.7553956834532374, 0.7549194991055456, 0.7544483985765125, 0.7553191489361702, 0.7561837455830389, 0.7557117750439367, 0.7552447552447552, 0.7560975609756098, 0.7569444444444444, 0.7577854671280276, 0.7564322469982847, 0.7559726962457338, 0.7568027210884354, 0.7568027210884354, 0.7576271186440678, 0.754180602006689, 0.7545605306799337, 0.7545605306799337, 0.7553719008264462, 0.7549342105263158, 0.7545008183306056, 0.7553017944535073, 0.7560975609756098, 0.7568881685575365, 0.7580645161290323, 0.7552, 0.7559808612440191, 0.7567567567567568, 0.757527733755943, 0.7554858934169278, 0.7550702028081123, 0.7546583850931677, 0.7554179566563467, 0.7561728395061729, 0.7557603686635944, 0.7553516819571865, 0.7553516819571865, 0.7560975609756098, 0.756838905775076, 0.755656108597285, 0.7552552552552553, 0.7559880239520959, 0.7567164179104477, 0.7574404761904762, 0.7555228276877761, 0.7551319648093842, 0.7547445255474453, 0.7554585152838428, 0.7561683599419449, 0.7557803468208093, 0.7553956834532374, 0.7560975609756098, 0.7567954220314735, 0.7574893009985735, 0.7563739376770539, 0.7553041018387553, 0.7559943582510579, 0.7566807313642757, 0.7573632538569425, 0.7555555555555555, 0.7548209366391184, 0.7548209366391184, 0.7554945054945055, 0.7551299589603283, 0.7557980900409277, 0.7554347826086957, 0.7560975609756098, 0.7567567567567568, 0.7574123989218329, 0.7553475935828877, 0.756, 0.7566489361702128, 0.7572944297082228, 0.7555847568988173, 0.7552356020942408, 0.7548891786179922, 0.7555266579973993, 0.7561608300907912, 0.7551813471502591, 0.7554697554697555, 0.7554697554697555, 0.7560975609756098, 0.7567221510883483, 0.7557251908396947, 0.7553865652724968, 0.7560050568900126, 0.7566204287515763, 0.7572327044025158, 0.7556109725685786, 0.7552795031055901, 0.754950495049505, 0.7555555555555555, 0.7561576354679803, 0.7558282208588957, 0.7555012224938875, 0.7560975609756098, 0.7566909975669099, 0.7572815533980582, 0.7563329312424608, 0.755421686746988, 0.7560096153846154, 0.7565947242206235, 0.757177033492823, 0.7556346381969158, 0.7550058892815077, 0.7550058892815077, 0.7555816686251469, 0.7552693208430913, 0.7558411214953271, 0.7555296856810244, 0.7560975609756098, 0.7566628041714948, 0.7572254335260116, 0.7563218390804598, 0.7560137457044673, 0.7565714285714286, 0.7571265678449259, 0.755656108597285, 0.7553551296505073, 0.7553551296505073, 0.7553551296505073, 0.7559055118110236, 0.7556053811659192, 0.7558528428093646, 0.7558528428093646, 0.7563959955506118, 0.7569367369589345, 0.7560706401766004, 0.7557755775577558, 0.7557755775577558, 0.756311745334797, 0.7568455640744798, 0.7554347826086957, 0.7551462621885157, 0.7551462621885157, 0.7556756756756757, 0.756202804746494, 0.7559139784946236, 0.7556270096463023, 0.7561497326203208, 0.7566702241195304, 0.7571884984025559, 0.7563559322033898, 0.7555555555555555, 0.7555555555555555, 0.7560718057022175, 0.7565858798735511, 0.7552301255230126, 0.7549530761209593, 0.7549530761209593, 0.7554630593132154, 0.7551867219917012, 0.7556935817805382, 0.7554179566563467, 0.7559217301750772, 0.7564234326824255, 0.7569230769230769, 0.7561224489795918, 0.7553516819571865, 0.7558494404883012, 0.7563451776649747, 0.7550403225806451, 0.7547738693467336, 0.7547738693467336, 0.7552657973921765, 0.7557557557557557, 0.7554890219560878, 0.755223880597015, 0.755223880597015, 0.7557100297914597, 0.7561942517343905, 0.7554240631163708, 0.7551622418879056, 0.7551622418879056, 0.7556427870461236, 0.7561214495592556, 0.754863813229572, 0.7546071774975752, 0.7546071774975752, 0.755082284607938, 0.7555555555555555, 0.7552986512524085, 0.7550432276657061, 0.7555129434324065, 0.7559808612440191, 0.7564469914040115, 0.7557034220532319, 0.7549857549857549, 0.7549857549857549, 0.7554502369668247, 0.7559129612109745, 0.7546992481203008, 0.7544517338331771, 0.7544517338331771, 0.754911131898971, 0.7546641791044776, 0.75512104283054, 0.754874651810585, 0.7553290083410565, 0.755781683626272, 0.7557603686635944, 0.7555147058823529, 0.7548209366391184, 0.7552703941338221, 0.7557182067703568, 0.7545454545454545, 0.7543064369900272, 0.7543064369900272, 0.7547511312217194, 0.7551942186088527, 0.7549549549549549, 0.7547169811320755, 0.7547169811320755, 0.7551569506726458, 0.7555953446732319, 0.7549019607843137, 0.7546666666666667, 0.7546666666666667, 0.7551020408163265, 0.7555358724534986, 0.7544014084507042, 0.7541703248463565, 0.7541703248463565, 0.754601226993865, 0.7543706293706294, 0.7547993019197208, 0.7545691906005222, 0.7549956559513467, 0.7554206418039896, 0.7558441558441559, 0.7551724137931034, 0.7545219638242894, 0.7547332185886403, 0.7549441100601891, 0.7553648068669528, 0.7542662116040956, 0.7540425531914894, 0.7540425531914894, 0.7544604927782498, 0.7542372881355932, 0.754653130287648, 0.7544303797468355, 0.7548441449031171, 0.7552565180824222, 0.7552388935456832, 0.7550167224080268, 0.7543859649122807, 0.7547956630525438, 0.7552039966694422, 0.7541390728476821, 0.7539223781998349, 0.7539223781998349, 0.754328112118714, 0.7547325102880659, 0.7545155993431856, 0.7542997542997543, 0.7547015535568274, 0.7551020408163265, 0.7555012224938875]
    sip_acc = [mean([sip_acc1[i], sip_acc2[i], sip_acc3[i], sip_acc4[i]]) for i in range(130)]
    fig = plt.figure(figsize=(15, 10))
    ax = fig.add_subplot()
    ax.set_ylim(0.2, 1)
    ax.set_ylabel("Accuracy", fontdict=label_font)
    ax.set_xlabel("Packets", fontdict=label_font)
    ax.xaxis.major.formatter._useMathText = True
    # ax.scatter(packets, sip_acc, s=40, marker='^')
    ax.plot(packets, sip_acc, lw=3.5, color='#FF0000')
    ax.ticklabel_format(style='sci', scilimits=(-1, 2), axis='x')
    plt.savefig("./figures/perf_real_time_acc.eps", bbox_inches='tight')
    plt.show()


category_names = ['Packet Capture', 'Feature extraction', 'Model Evaluation']
results = {
    '1s flow': [32.29, 1.93, 0.33],
    '2s flow': [50.18, 3.29+0.019, 0.432],
    '5s flow': [49.17, 6.08+0.033, 0.7489],
    '10s flow': [56.1, 15, 1.33],  # 1,2106
    # '5s flow': [32.29, 42, 27, 24],
    # '10s flow': [11, 43, 33, 13],
    # '30s flow': [9, 39, 41, 11]
}

for k, v in results.items():
    results[k] = [x / sum(v) for x in v]



def survey(results, category_names):
    """
    Parameters
    ----------
    results : dict
        A mapping from question labels to a list of answers per category.
        It is assumed all lists contain the same number of entries and that
        it matches the length of *category_names*.
    category_names : list of str
        The category labels.
    """
    labels = list(results.keys())
    data = np.array(list(results.values()))
    data_cum = data.cumsum(axis=1)
    category_colors = plt.colormaps['RdYlGn'](
        np.linspace(0.15, 0.85, data.shape[1]))

    fig, ax = plt.subplots(figsize=(15, 8))
    ax.invert_yaxis()
    ax.xaxis.set_visible(False)
    ax.set_xlim(0, np.sum(data, axis=1).max())

    for i, (colname, color) in enumerate(zip(category_names, category_colors)):
        widths = data[:, i]
        starts = data_cum[:, i] - widths
        rects = ax.barh(labels, widths, left=starts, height=0.5,
                        label=colname, color=color)

        r, g, b, _ = color
        text_color = 'white' if r * g * b < 0.5 else 'darkgrey'
        # ax.bar_label(rects, label_type='center', color=text_color)
    ax.legend(ncols=len(category_names), bbox_to_anchor=(0, 1),
              loc='lower left', prop=legend_font)
    plt.grid(False)
    plt.savefig("./figures/perf_module_time.eps", bbox_inches='tight')
    return fig, ax




if __name__ == '__main__':
    # perf_throughout()

    survey(results, category_names)
    plt.show()

    # perf_system_cls_metrics()